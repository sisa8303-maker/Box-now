<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Box Now — Проверка на шкафче</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#10b981;
      --accent-2:#06b6d4;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
      --success-glow: 0 8px 30px rgba(16,185,129,0.18);
      --error-glow: 0 8px 30px rgba(255,59,48,0.12);
    }
    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#081028 0%, #08121a 100%);color:#e6eef8}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:32px}
    .card{width:820px;max-width:98%;background:var(--card);border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,0.03)}
    .header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
    .header h1{margin:0;font-size:28px;letter-spacing:-0.6px}
    .display{
      margin-top:8px;
      background:var(--glass);
      padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.02);
      display:flex;align-items:center;justify-content:space-between;
      transition:box-shadow 240ms ease, transform 240ms ease;
    }
    .codebig{font-size:68px;font-weight:800;letter-spacing:8px;transition:transform 220ms cubic-bezier(.2,.9,.2,1)}
    .owner{font-size:22px;color:var(--accent);font-weight:700;transition:opacity 220ms}
    .controls{margin-top:18px;display:flex;gap:8px;flex-wrap:wrap}
    .input{
      flex:1;min-width:220px;
      background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);padding:14px;border-radius:12px;font-size:20px;color:inherit;
    }
    .btn{background:linear-gradient(180deg,#0ea5a1,#0ea5a1);border:none;padding:12px 16px;border-radius:12px;font-weight:700;cursor:pointer;color:#062018}
    .small{font-size:13px;color:var(--muted)}
    .result{margin-top:12px;padding:12px;border-radius:10px;background:rgba(16,185,129,0.06);color:var(--accent);font-weight:700;text-align:center}
    .result.err{background:rgba(255,59,48,0.06);color:#ff6b6b}
    .hidden{display:none !important}
    /* Animations */
    @keyframes shake {
      10%, 90% { transform: translateX(-1px); }
      20%, 80% { transform: translateX(2px); }
      30%, 50%, 70% { transform: translateX(-4px); }
      40%, 60% { transform: translateX(4px); }
    }
    @keyframes pop {
      0% { transform: scale(0.86); opacity: 0; }
      60% { transform: scale(1.02); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
    /* Fullscreen success banner */
    .banner {
      position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.85));
      z-index:1200;padding:24px;backdrop-filter: blur(6px);opacity:0;pointer-events:none;
      transition:opacity 220ms ease;
    }
    .banner.show{opacity:1;pointer-events:auto}
    .banner-card{background:linear-gradient(180deg,#062025,#053038);padding:28px;border-radius:14px;box-shadow:var(--success-glow);text-align:center;max-width:920px}
    .banner h2{margin:0 0 8px;font-size:28px;color:var(--accent-2)}
    .banner p{margin:0;font-size:24px;font-weight:800;letter-spacing:2px;color:#e6eef8}
    .banner p.big{font-size:34px}
    /* success glow for display */
    .display.success{box-shadow:var(--success-glow);transform:translateY(-4px)}
    .display.error{box-shadow:var(--error-glow)}
    .display.error .codebig{animation:shake 420ms cubic-bezier(.36,.07,.19,.97)}
    .display.success .codebig{transform:scale(1.04)}
    @media (max-width:880px){.codebig{font-size:48px}.banner p.big{font-size:22px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main">
        <div class="header">
          <h1>Box Now</h1>
        </div>

        <div class="display" id="display" aria-live="polite">
          <div>
            <div class="codebig" id="displayCode">— — — —</div>
            <div class="small">Код на шкафче</div>
          </div>
          <div style="text-align:right">
            <div class="owner" id="displayOwner">—</div>
            <div class="small">Собственик</div>
          </div>
        </div>

        <div class="controls">
          <input id="codeInput" class="input" inputmode="numeric" maxlength="10" placeholder="Въведи кода тук" aria-label="Код на шкафче" />
          <button id="checkBtn" class="btn">ПРОВЕРИ</button>
          <button id="resetBtn" class="btn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)">Изчисти</button>
        </div>

        <div id="resultBox" class="result hidden" role="status"></div>

    </div>
  </div>

  <!-- Fullscreen banner for success message -->
  <div id="banner" class="banner" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="banner-card" id="bannerCard">
      <h2>ВАЖНО</h2>
      <p class="big" id="bannerText">ВАШЕТО ШКАФЧЕ СЕ ОТВАРЯ — ВЗЕМЕТЕ ВАШАТА ПРАТКА</p>
    </div>
  </div>

<script>
  (function(){
    // mapping of codes to owners (kept in script)
    const mapping = {
      "6643":"лъчко",
      "6642":"доби",
      "6641":"боби",
      "6632":"Томи",
      "6644":"Цеци",
      "5664":"Павел"
    };

    const display = document.getElementById('display');
    const displayCode = document.getElementById('displayCode');
    const displayOwner = document.getElementById('displayOwner');
    const codeInput = document.getElementById('codeInput');
    const checkBtn = document.getElementById('checkBtn');
    const resetBtn = document.getElementById('resetBtn');
    const resultBox = document.getElementById('resultBox');
    const banner = document.getElementById('banner');
    const bannerText = document.getElementById('bannerText');

    // Web Audio API simple sounds
    const audioCtx = new (window.AudioContext||window.webkitAudioContext)();

    function playSuccess(){
      const now = audioCtx.currentTime;
      const o1 = audioCtx.createOscillator();
      const g1 = audioCtx.createGain();
      o1.type = 'sine';
      o1.frequency.setValueAtTime(660, now);
      o1.frequency.exponentialRampToValueAtTime(880, now + 0.12);
      g1.gain.setValueAtTime(0.0001, now);
      g1.gain.exponentialRampToValueAtTime(0.25, now + 0.02);
      g1.gain.exponentialRampToValueAtTime(0.0001, now + 0.4);
      o1.connect(g1); g1.connect(audioCtx.destination);
      o1.start(now); o1.stop(now + 0.45);
    }

    function playError(){
      const now = audioCtx.currentTime;
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = 'sawtooth';
      o.frequency.setValueAtTime(220, now);
      o.frequency.exponentialRampToValueAtTime(110, now + 0.18);
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.35, now + 0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, now + 0.45);
      o.connect(g); g.connect(audioCtx.destination);
      o.start(now); o.stop(now + 0.5);
    }

    function updateDisplay(code){
      displayCode.textContent = code ? code : '— — — —';
      displayOwner.textContent = mapping[code] || '—';
    }

    function showTempResult(text, ok=true){
      resultBox.classList.remove('hidden');
      resultBox.textContent = text;
      if(ok){ resultBox.classList.remove('err'); } else { resultBox.classList.add('err'); }
      setTimeout(()=>{ resultBox.classList.add('hidden'); }, 2200);
    }

    function showBanner(){
      banner.classList.add('show');
      banner.setAttribute('aria-hidden', 'false');
      // auto hide after 3s
      setTimeout(()=>{ banner.classList.remove('show'); banner.setAttribute('aria-hidden','true'); }, 3000);
    }

    function checkCode(){
      const code = codeInput.value.trim();
      if(!code){
        display.classList.add('error');
        playError();
        showTempResult('Моля въведи код.', false);
        setTimeout(()=>display.classList.remove('error'), 600);
        return;
      }
      if(mapping[code]){
        // success
        display.classList.remove('error');
        display.classList.add('success');
        playSuccess();
        updateDisplay(code);
        // show big uppercase message in banner (already set)
        bannerText.textContent = 'ВАШЕТО ШКАФЧЕ СЕ ОТВАРЯ — ВЗЕМЕТЕ ВАШАТА ПРАТКА';
        showBanner();
        setTimeout(()=>display.classList.remove('success'), 900);
      } else {
        // error
        display.classList.remove('success');
        display.classList.add('error');
        playError();
        updateDisplay(code);
        showTempResult('ГРЕШЕН КОД — НЯМА ТАКЪВ В СПИСЪКА', false);
        setTimeout(()=>display.classList.remove('error'), 900);
      }
    }

    checkBtn.addEventListener('click', checkCode);
    codeInput.addEventListener('keydown', e=>{
      if(e.key === 'Enter') checkCode();
    });
    resetBtn.addEventListener('click', ()=>{
      codeInput.value = '';
      updateDisplay('');
    });

    // init
    updateDisplay('');
  })();
</script>
</body>
</html>
